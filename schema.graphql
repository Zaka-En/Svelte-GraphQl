type AuthorConnection {
  edges: [AuthorTypeEdge!]!
  pageInfo: CustomPageInfo!
}

type AuthorType implements Node {
  biography: String
  books: [BookType!]!
  country: String!
  fullname: String

  """The Globally Unique ID of this object"""
  id: ID!
  name: String!
}

"""An edge in a connection."""
type AuthorTypeEdge {
  """A cursor for use in pagination"""
  cursor: String!

  """The item at the end of the edge"""
  node: AuthorType!
}

type BookType {
  author: AuthorType
  authorId: Int!
  id: Int!
  isbn: String!
  pages: Int!
  publicationYear: Int!
  title: String!
}

input CreateAuthorInput {
  biography: String = null
  country: String!
  fullname: String = null
  name: String!
}

input CreateBookInput {
  authorId: Int!
  isbn: String!
  pages: Int!
  publicationYear: Int!
  title: String!
}

type CustomPageInfo {
  """When paginating forwards, the cursor to continue."""
  endCursor: String

  """When paginating forwards, are there more items?"""
  hasNextPage: Boolean!

  """When paginating backwards, are there more items?"""
  hasPreviousPage: Boolean!

  """When paginating backwards, the cursor to continue."""
  startCursor: String
  totalCount: Int!
}

"""Date with time (isoformat)"""
scalar DateTime

input FinishReadingInput {
  id: Int!
}

type Mutation {
  createAuthor(input: CreateAuthorInput!): AuthorType!
  createBook(input: CreateBookInput!): BookType!
  deleteAuthor(id: Int!): Boolean!
  deleteBook(id: Int!): Boolean!
  finishReading(input: FinishReadingInput!): ReadingStateType!
  startReading(input: StartReadingInput!): ReadingStateType!
  updateAuthor(input: UpdateAuthorInput!): AuthorType!
  updateBook(input: UpdateBookInput!): BookType!
  updateProgress(input: UpdateProgressInput!): ReadingStateType!
}

"""An object with a Globally Unique ID"""
interface Node {
  """The Globally Unique ID of this object"""
  id: ID!
}

type Query {
  author(id: Int!): AuthorType
  authors(after: String = null, before: String = null, first: Int = null, last: Int = null): AuthorConnection!
  authorsQuery: [AuthorType!]!
  book(id: Int!): BookType
  books: [BookType!]!
  myReadingProgress(userId: String!): [ReadingStateType!]!
}

type ReadingStateType {
  book: BookType
  bookId: Int!
  currentPage: Int!
  finishDate: DateTime
  id: Int!
  startDate: DateTime!
}

input StartReadingInput {
  bookId: Int!
  userId: String!
}

input UpdateAuthorInput {
  biography: String
  country: String
  fullname: String
  id: Int!
  name: String
}

input UpdateBookInput {
  authorId: Int
  id: Int!
  isbn: String
  pages: Int
  publicationYear: Int
  title: String
}

input UpdateProgressInput {
  currentPage: Int!
  id: Int!
}